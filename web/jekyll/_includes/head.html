{% if page.description %}
  {% assign description = page.description %}
{% else %}
  {% assign description = "I am Matej Košiarčik and I program stuff" %}
{% endif %}

{% if page.image %}
  {% assign image = page.image | absolute_url %}
{% else %}
  {% assign image = "/favicon.png" | absolute_url %}
{% endif %}

<head>
  <meta charset="UTF-8" />

  <!-- simulate part of production CSP header locally -->
  {% if jekyll.environment == "development" %}
    <meta http-equiv="Content-Security-Policy" content="default-src 'none'; base-uri 'self'; script-src 'self' 'unsafe-inline' 'unsafe-eval' localhost:* https://polyfill.io; style-src 'self' 'unsafe-inline' localhost:*; img-src 'self'; media-src 'self'; connect-src 'self' ws:;">
  {% endif %}

  {% if jekyll.environment == "production" %}
    <!-- <link rel="dns-prefetch" href="https://api.matejkosiarcik.com" /> -->
    <!-- <link rel="dns-prefetch" href="https://cdn.matejkosiarcik.com" /> -->
  {% endif %}

  {% if page.title %}
    <title>{{ site.title }} | {{ page.title }}</title>
  {% else %}
    <title>{{ site.title }}</title>
  {% endif %}

  <!-- meta -->
  <meta name="description" content="{{ description }}" />
  <meta name="keywords" content="programmer, indie developer" />
  <meta name="author" content="Matej Košiarčik" />
  <meta name="copyright" content="Copyright © 2017-2020 Matej Košiarčik. All rights reserved." />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  {% if jekyll.environment == "production" %}
    <link rel="canonical" href="{{ page.url | absolute_url }}" />
  {% endif %}

  <!-- favicon -->
  <link rel="icon" type="image/png" href="/favicon.png" />
  <!--[if IE]>
    <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" />
  <![endif]-->
  <link rel="mask-icon" href="/pinicon.svg" color="#369" />
  <link rel="apple-touch-icon" href="/apple-touch-icon.png" />

  <!-- OpenGraph -->
  {% if jekyll.environment == "production" %}
    {% if page.title %}
      <meta property="og:title" content="{{ page.title }}" />
    {% else %}
      <meta property="og:title" content="{{ site.title }}" />
    {% endif %}
    {% if page.path contains "_posts" %}
      <meta property="og:type" content="article" />
    {% else %}
      <meta property="og:type" content="website" />
    {% endif %}
    <meta property="og:url" content="{{ page.url | absolute_url }}" />
    <meta property="og:description" content="{{ description }}" />
    <meta property="og:image" content="{{ image }}" />
  {% endif %}

  {% if jekyll.environment == "production" %}
    <link rel="stylesheet" type="text/css" href="/style.css">
  {% endif %}
</head>
